{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thinkpad\\\\source\\\\Projects\\\\JobsPlanet-MERN-App\\\\frontend\\\\src\\\\components\\\\Recruiter\\\\MyActiveJobs.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport List from '@material-ui/core/List';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ListItem from '@material-ui/core/ListItem';\nimport PropTypes from \"prop-types\";\nimport Card from \"react-bootstrap/Card\";\nimport { connect } from \"react-redux\";\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport { Link } from \"react-router-dom\";\n\nclass MyActiveJobs extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onLogoutClick = e => {\n      e.preventDefault();\n      this.props.logoutUser();\n    };\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    this.state = {\n      userdetails: [],\n      users: [],\n      applications: [],\n      jobs: [],\n      sortedJobs: [],\n      sortName: true,\n      showform: false,\n      posmax: -1,\n      appmax: -1,\n      deadline: new Date(),\n      editing: \"\"\n    };\n    this.deljob = this.deljob.bind(this);\n    this.editJob = this.editJob.bind(this);\n    this.editJobSubmit = this.editJobSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    const {\n      user\n    } = this.props.auth;\n    axios.get('http://localhost:4000/user/' + user.id).then(response => {\n      this.setState({\n        userdetails: response.data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n    axios.get('http://localhost:4000/job/get_jobs').then(response => {\n      this.setState({\n        jobs: response.data,\n        sortedJobs: response.data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n    axios.get('http://localhost:4000/user/').then(response => {\n      this.setState({\n        users: response.data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n    axios.get('http://localhost:4000/application/get_applications').then(response => {\n      this.setState({\n        applications: response.data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.errors) {\n      this.setState({\n        errors: nextProps.errors\n      });\n    }\n  }\n\n  deljob(id) {\n    let applicationsArray = this.state.applications;\n    let usersArray = this.state.users;\n    axios.delete('http://localhost:4000/job/del_job/' + id).then(response => {\n      alert(\"Job deleted successfully.\");\n    }).catch(function (error) {\n      console.log(error);\n    });\n    applicationsArray.filter(item => item.jobId === id && item.status === \"Accepted\").forEach(function (appli) {\n      const editEmployee = {\n        working: false\n      };\n      axios.put('http://localhost:4000/user/edit_profile/' + appli.applicantId, editEmployee).then(response => {\n        console.log(editEmployee);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    });\n    applicationsArray.filter(item => item.jobId === id).forEach(function (appli) {\n      let applicant = usersArray.filter(item => item._id === appli.applicantId)[0];\n      let nnumapp = +applicant.numapp;\n\n      if (applicant.working === false) {\n        nnumapp = +nnumapp - 1;\n        if (nnumapp < 0) nnumapp = 0;\n      }\n\n      const editApplicant = {\n        numapp: nnumapp\n      };\n      axios.put('http://localhost:4000/user/edit_profile/' + appli.applicantId, editApplicant).then(response => {\n        console.log(editApplicant);\n      }).catch(function (error) {\n        console.log(error);\n      });\n      const editAppli = {\n        status: \"Deleted\"\n      };\n      axios.put('http://localhost:4000/application/edit_application/' + appli._id, editAppli).then(response => {\n        console.log(editAppli);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }); // to refresh\n\n    this.props.history.push('/viewMyActiveJobs');\n    this.props.history.push('/viewMyActiveJobs');\n    this.props.history.goBack();\n    window.location.reload();\n  }\n\n  editJob(job) {\n    let show = !this.state.showform;\n    this.setState({\n      showform: show\n    });\n    this.setState({\n      editing: job._id\n    });\n    console.log(this.state.showform);\n    this.setState({\n      appmax: job.appmax\n    });\n    this.setState({\n      posmax: job.posmax\n    });\n\n    if (job.deadline) {\n      job.deadline = job.deadline.toString();\n      job.deadline = job.deadline.substring(0, 10);\n      this.setState({\n        deadline: job.deadline\n      });\n    } // to refresh\n    // this.props.history.push('/viewMyActiveJobs');\n\n  }\n\n  onBack() {\n    let show = !this.state.showform;\n    this.setState({\n      showform: show\n    });\n    this.setState({\n      editing: \"\"\n    }); // to refresh\n\n    this.props.history.push('/viewMyActiveJobs');\n  }\n\n  editJobSubmit(job) {\n    const idToChange = job._id;\n    const ind = this.state.jobs.findIndex(x => x._id === idToChange);\n    if (this.state.deadline) this.state.jobs[ind].deadline = this.state.deadline;\n\n    if (this.state.appmax < this.state.posmax) {\n      alert(\"Max. no. of applications cannot be less than the max. no. of positions.\");\n    } else {\n      if (this.state.appmax) this.state.jobs[ind].appmax = this.state.appmax;\n      if (this.state.posmax) this.state.jobs[ind].posmax = this.state.posmax;\n      axios.put('http://localhost:4000/job/edit_job/' + idToChange, this.state.jobs[ind]).then(response => {\n        console.log(this.state.jobs[ind]);\n        this.setState({\n          editing: \"\"\n        });\n      }).catch(function (error) {\n        alert(\"Job couldn't be updated!\");\n        console.log(error);\n      });\n    } // to refresh\n\n\n    let show = !this.state.showform;\n    this.setState({\n      showform: show\n    }); // window.location.reload();\n  }\n\n  render() {\n    const userRole = this.state.userdetails.role;\n    const userid = this.state.userdetails._id;\n    let MyActiveJobs;\n\n    if (userRole === \"recruiter\") {\n      MyActiveJobs = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        md: 3,\n        lg: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(List, {\n        component: \"nav\",\n        \"aria-label\": \"mailbox folders\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(ListItem, {\n        text: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"My Jobs Listing \"), React.createElement(Tooltip, {\n        title: \"Add Job\",\n        \"aria-label\": \"added\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(Link, {\n        style: {\n          color: '#009900',\n          weight: 'bold'\n        },\n        to: \"/addJob\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \" add\")))))))), React.createElement(Grid, {\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        md: 12,\n        lg: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(Table, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, React.createElement(TableHead, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, \"Title\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, \"Date of posting\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, \"Number of Applicants\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, \"Remaining Number of Positions\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }))), React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, this.state.jobs.filter(item => item.recruiter === userid && item.numpos < item.posmax).map((job, ind) => React.createElement(TableRow, {\n        key: ind,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, job.title), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, job.dateOfPost.substring(0, 10)), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, job.numapp), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, job.posmax - job.numpos), React.createElement(Link, {\n        to: {\n          pathname: \"/appList\",\n          state: job._id // data array of objects\n\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, \"View applications\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(Dropdown, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(Dropdown.Toggle, {\n        variant: \"secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }), React.createElement(Dropdown.Menu, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(Dropdown.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"Delete Job\",\n        \"aria-label\": \"delete\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn waves-effect waves-light hoverable blue accent-3\",\n        onClick: () => this.deljob(job._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        style: {\n          color: \"#FF0000\"\n        },\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, \"delete\"), \" Delete\"))), React.createElement(Dropdown.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"Edit Job\",\n        \"aria-label\": \"edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn waves-effect waves-light hoverable blue accent-3\",\n        onClick: () => this.editJob(job),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        style: {\n          color: \"#0000FF\"\n        },\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, \"edit\"), \"Edit\")))))), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, !this.state.showform || this.state.editing !== job._id ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        noValidate: true,\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-field col s12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"appmax\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, \"Maximum number of applications allowed\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        onChange: this.onChange,\n        value: this.state.appmax,\n        id: \"appmax\",\n        type: \"number\",\n        min: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"input-field col s12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"posmax\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, \"Maximum number of positions available\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        onChange: this.onChange,\n        value: this.state.posmax,\n        id: \"posmax\",\n        type: \"number\",\n        min: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"input-field col s12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"deadline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, \"Deadline for application\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        onChange: this.onChange,\n        value: this.state.deadline,\n        id: \"deadline\",\n        type: \"date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col s12\",\n        style: {\n          paddingLeft: \"11.250px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        style: {\n          color: \"#0000FF\"\n        },\n        className: \"btn btn-sm waves-effect waves-light hoverable blue accent-3\",\n        onClick: () => this.onBack(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, \"Back\")), React.createElement(\"button\", {\n        style: {\n          color: \"#009900\"\n        },\n        className: \"btn btn-sm waves-effect waves-light hoverable blue accent-3\",\n        onClick: () => this.editJobSubmit(job),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, \"Save\")))))))))))))));\n    }\n\n    return React.createElement(\"div\", {\n      style: {\n        height: \"75vh\"\n      },\n      className: \"valign-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col s12 center-align\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }, React.createElement(Card, {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, React.createElement(Card.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386\n      },\n      __self: this\n    }, React.createElement(Card.Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    }, MyActiveJobs))))));\n  }\n\n}\n\nMyActiveJobs.propTypes = {\n  auth: PropTypes.object.isRequired,\n  errors: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  errors: state.errors\n});\n\nexport default connect(mapStateToProps)(MyActiveJobs);","map":{"version":3,"sources":["C:/Users/thinkpad/source/Projects/JobsPlanet-MERN-App/frontend/src/components/Recruiter/MyActiveJobs.js"],"names":["React","Component","axios","Paper","Grid","TableCell","TableHead","TableRow","Table","TableBody","List","Tooltip","ListItem","PropTypes","Card","connect","Dropdown","Link","MyActiveJobs","constructor","props","onLogoutClick","e","preventDefault","logoutUser","onChange","setState","target","id","value","state","userdetails","users","applications","jobs","sortedJobs","sortName","showform","posmax","appmax","deadline","Date","editing","deljob","bind","editJob","editJobSubmit","componentDidMount","user","auth","get","then","response","data","catch","error","console","log","componentWillReceiveProps","nextProps","errors","applicationsArray","usersArray","delete","alert","filter","item","jobId","status","forEach","appli","editEmployee","working","put","applicantId","applicant","_id","nnumapp","numapp","editApplicant","editAppli","history","push","goBack","window","location","reload","job","show","toString","substring","onBack","idToChange","ind","findIndex","x","render","userRole","role","userid","color","weight","recruiter","numpos","map","title","dateOfPost","pathname","onSubmit","paddingLeft","height","width","propTypes","object","isRequired","mapStateToProps"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,QAAP,MAAqB,0BAArB;AACA,SAASC,IAAT,QAAqB,kBAArB;;AAIA,MAAMC,YAAN,SAA2BjB,SAA3B,CAAqC;AAEjCkB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAoBnBC,aApBmB,GAoBHC,CAAC,IAAI;AACjBA,MAAAA,CAAC,CAACC,cAAF;AACA,WAAKH,KAAL,CAAWI,UAAX;AACH,KAvBkB;;AAAA,SAyBnBC,QAzBmB,GAyBRH,CAAC,IAAI;AACZ,WAAKI,QAAL,CAAc;AAAE,SAACJ,CAAC,CAACK,MAAF,CAASC,EAAV,GAAeN,CAAC,CAACK,MAAF,CAASE;AAA1B,OAAd;AACH,KA3BkB;;AAEf,SAAKC,KAAL,GAAa;AACTC,MAAAA,WAAW,EAAE,EADJ;AAETC,MAAAA,KAAK,EAAE,EAFE;AAGTC,MAAAA,YAAY,EAAE,EAHL;AAITC,MAAAA,IAAI,EAAE,EAJG;AAKTC,MAAAA,UAAU,EAAE,EALH;AAMTC,MAAAA,QAAQ,EAAC,IANA;AAOTC,MAAAA,QAAQ,EAAE,KAPD;AAQTC,MAAAA,MAAM,EAAE,CAAC,CARA;AASTC,MAAAA,MAAM,EAAE,CAAC,CATA;AAUTC,MAAAA,QAAQ,EAAE,IAAIC,IAAJ,EAVD;AAWTC,MAAAA,OAAO,EAAE;AAXA,KAAb;AAaA,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKC,OAAL,GAAe,KAAKA,OAAL,CAAaD,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKE,aAAL,GAAqB,KAAKA,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB,CAArB;AACH;;AAWDG,EAAAA,iBAAiB,GAAG;AAChB,UAAM;AAAEC,MAAAA;AAAF,QAAW,KAAK5B,KAAL,CAAW6B,IAA5B;AACA/C,IAAAA,KAAK,CAACgD,GAAN,CAAU,gCAA+BF,IAAI,CAACpB,EAA9C,EACSuB,IADT,CACcC,QAAQ,IAAI;AACd,WAAK1B,QAAL,CAAc;AAACK,QAAAA,WAAW,EAAEqB,QAAQ,CAACC;AAAvB,OAAd;AACH,KAHT,EAISC,KAJT,CAIe,UAASC,KAAT,EAAgB;AACnBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KANT;AAOArD,IAAAA,KAAK,CAACgD,GAAN,CAAU,oCAAV,EACKC,IADL,CACUC,QAAQ,IAAI;AACd,WAAK1B,QAAL,CAAc;AAACQ,QAAAA,IAAI,EAAEkB,QAAQ,CAACC,IAAhB;AAAsBlB,QAAAA,UAAU,EAACiB,QAAQ,CAACC;AAA1C,OAAd;AACH,KAHL,EAIKC,KAJL,CAIW,UAASC,KAAT,EAAgB;AACnBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KANL;AAOArD,IAAAA,KAAK,CAACgD,GAAN,CAAU,6BAAV,EACKC,IADL,CACUC,QAAQ,IAAI;AACd,WAAK1B,QAAL,CAAc;AAACM,QAAAA,KAAK,EAAEoB,QAAQ,CAACC;AAAjB,OAAd;AACH,KAHL,EAIKC,KAJL,CAIW,UAASC,KAAT,EAAgB;AACnBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KANL;AAOArD,IAAAA,KAAK,CAACgD,GAAN,CAAU,oDAAV,EACKC,IADL,CACUC,QAAQ,IAAI;AACd,WAAK1B,QAAL,CAAc;AAACO,QAAAA,YAAY,EAAEmB,QAAQ,CAACC;AAAxB,OAAd;AACH,KAHL,EAIKC,KAJL,CAIW,UAASC,KAAT,EAAgB;AACnBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KANL;AAOH;;AAGDG,EAAAA,yBAAyB,CAACC,SAAD,EAAY;AACjC,QAAIA,SAAS,CAACC,MAAd,EAAsB;AAClB,WAAKlC,QAAL,CAAc;AACdkC,QAAAA,MAAM,EAAED,SAAS,CAACC;AADJ,OAAd;AAGH;AACJ;;AAEDjB,EAAAA,MAAM,CAACf,EAAD,EAAK;AACP,QAAIiC,iBAAiB,GAAG,KAAK/B,KAAL,CAAWG,YAAnC;AACA,QAAI6B,UAAU,GAAG,KAAKhC,KAAL,CAAWE,KAA5B;AACA9B,IAAAA,KAAK,CACA6D,MADL,CACY,uCAAuCnC,EADnD,EAEKuB,IAFL,CAEUC,QAAQ,IAAI;AACdY,MAAAA,KAAK,CAAC,2BAAD,CAAL;AACH,KAJL,EAKKV,KALL,CAKW,UAASC,KAAT,EAAgB;AACnBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KAPL;AASAM,IAAAA,iBAAiB,CAACI,MAAlB,CAAyBC,IAAI,IAAIA,IAAI,CAACC,KAAL,KAAevC,EAAf,IAAqBsC,IAAI,CAACE,MAAL,KAAgB,UAAtE,EAAkFC,OAAlF,CACI,UAASC,KAAT,EACA;AACI,YAAMC,YAAY,GAAG;AACjBC,QAAAA,OAAO,EAAE;AADQ,OAArB;AAGAtE,MAAAA,KAAK,CACAuE,GADL,CACS,6CAA6CH,KAAK,CAACI,WAD5D,EACyEH,YADzE,EAEKpB,IAFL,CAEUC,QAAQ,IAAI;AACdI,QAAAA,OAAO,CAACC,GAAR,CAAYc,YAAZ;AACH,OAJL,EAKKjB,KALL,CAKW,UAASC,KAAT,EAAgB;AACnBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,OAPL;AAQH,KAdL;AAgBAM,IAAAA,iBAAiB,CAACI,MAAlB,CAAyBC,IAAI,IAAIA,IAAI,CAACC,KAAL,KAAevC,EAAhD,EAAoDyC,OAApD,CACI,UAASC,KAAT,EACA;AACI,UAAIK,SAAS,GAAGb,UAAU,CAACG,MAAX,CAAkBC,IAAI,IAAIA,IAAI,CAACU,GAAL,KAAaN,KAAK,CAACI,WAA7C,EAA0D,CAA1D,CAAhB;AACA,UAAIG,OAAO,GAAG,CAACF,SAAS,CAACG,MAAzB;;AAEA,UAAGH,SAAS,CAACH,OAAV,KAAsB,KAAzB,EACA;AACIK,QAAAA,OAAO,GAAG,CAACA,OAAD,GAAW,CAArB;AACA,YAAGA,OAAO,GAAG,CAAb,EAAgBA,OAAO,GAAG,CAAV;AACnB;;AAED,YAAME,aAAa,GAAG;AAClBD,QAAAA,MAAM,EAAED;AADU,OAAtB;AAIA3E,MAAAA,KAAK,CACAuE,GADL,CACS,6CAA6CH,KAAK,CAACI,WAD5D,EACyEK,aADzE,EAEK5B,IAFL,CAEUC,QAAQ,IAAI;AACdI,QAAAA,OAAO,CAACC,GAAR,CAAYsB,aAAZ;AACH,OAJL,EAKKzB,KALL,CAKW,UAASC,KAAT,EAAgB;AACnBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,OAPL;AASA,YAAMyB,SAAS,GAAG;AACdZ,QAAAA,MAAM,EAAE;AADM,OAAlB;AAIAlE,MAAAA,KAAK,CACAuE,GADL,CACS,wDAAwDH,KAAK,CAACM,GADvE,EAC4EI,SAD5E,EAEK7B,IAFL,CAEUC,QAAQ,IAAI;AACdI,QAAAA,OAAO,CAACC,GAAR,CAAYuB,SAAZ;AACH,OAJL,EAKK1B,KALL,CAKW,UAASC,KAAT,EAAgB;AACnBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,OAPL;AAQH,KArCL,EA5BO,CAoEP;;AACA,SAAKnC,KAAL,CAAW6D,OAAX,CAAmBC,IAAnB,CAAwB,mBAAxB;AACA,SAAK9D,KAAL,CAAW6D,OAAX,CAAmBC,IAAnB,CAAwB,mBAAxB;AACA,SAAK9D,KAAL,CAAW6D,OAAX,CAAmBE,MAAnB;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AAEH;;AAEDzC,EAAAA,OAAO,CAAC0C,GAAD,EAAM;AACT,QAAIC,IAAI,GAAG,CAAC,KAAK1D,KAAL,CAAWO,QAAvB;AACA,SAAKX,QAAL,CAAc;AAAEW,MAAAA,QAAQ,EAAEmD;AAAZ,KAAd;AACA,SAAK9D,QAAL,CAAc;AAAEgB,MAAAA,OAAO,EAAE6C,GAAG,CAACX;AAAf,KAAd;AACApB,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAK3B,KAAL,CAAWO,QAAvB;AACA,SAAKX,QAAL,CAAc;AAAEa,MAAAA,MAAM,EAAEgD,GAAG,CAAChD;AAAd,KAAd;AACA,SAAKb,QAAL,CAAc;AAAEY,MAAAA,MAAM,EAAEiD,GAAG,CAACjD;AAAd,KAAd;;AACA,QAAGiD,GAAG,CAAC/C,QAAP,EACA;AACI+C,MAAAA,GAAG,CAAC/C,QAAJ,GAAe+C,GAAG,CAAC/C,QAAJ,CAAaiD,QAAb,EAAf;AACAF,MAAAA,GAAG,CAAC/C,QAAJ,GAAe+C,GAAG,CAAC/C,QAAJ,CAAakD,SAAb,CAAuB,CAAvB,EAAyB,EAAzB,CAAf;AACA,WAAKhE,QAAL,CAAc;AAAEc,QAAAA,QAAQ,EAAE+C,GAAG,CAAC/C;AAAhB,OAAd;AACH,KAZQ,CAaT;AACA;;AACH;;AAEDmD,EAAAA,MAAM,GAAG;AACL,QAAIH,IAAI,GAAG,CAAC,KAAK1D,KAAL,CAAWO,QAAvB;AACA,SAAKX,QAAL,CAAc;AAAEW,MAAAA,QAAQ,EAAEmD;AAAZ,KAAd;AACA,SAAK9D,QAAL,CAAc;AAAEgB,MAAAA,OAAO,EAAE;AAAX,KAAd,EAHK,CAKL;;AACA,SAAKtB,KAAL,CAAW6D,OAAX,CAAmBC,IAAnB,CAAwB,mBAAxB;AACH;;AAEDpC,EAAAA,aAAa,CAACyC,GAAD,EAAM;AACf,UAAMK,UAAU,GAAGL,GAAG,CAACX,GAAvB;AACA,UAAMiB,GAAG,GAAG,KAAK/D,KAAL,CAAWI,IAAX,CAAgB4D,SAAhB,CAA0BC,CAAC,IAAIA,CAAC,CAACnB,GAAF,KAAUgB,UAAzC,CAAZ;AAEA,QAAG,KAAK9D,KAAL,CAAWU,QAAd,EACI,KAAKV,KAAL,CAAWI,IAAX,CAAgB2D,GAAhB,EAAqBrD,QAArB,GAAgC,KAAKV,KAAL,CAAWU,QAA3C;;AACJ,QAAG,KAAKV,KAAL,CAAWS,MAAX,GAAoB,KAAKT,KAAL,CAAWQ,MAAlC,EACA;AACI0B,MAAAA,KAAK,CAAC,yEAAD,CAAL;AACH,KAHD,MAKA;AACI,UAAG,KAAKlC,KAAL,CAAWS,MAAd,EACI,KAAKT,KAAL,CAAWI,IAAX,CAAgB2D,GAAhB,EAAqBtD,MAArB,GAA8B,KAAKT,KAAL,CAAWS,MAAzC;AACJ,UAAG,KAAKT,KAAL,CAAWQ,MAAd,EACI,KAAKR,KAAL,CAAWI,IAAX,CAAgB2D,GAAhB,EAAqBvD,MAArB,GAA8B,KAAKR,KAAL,CAAWQ,MAAzC;AACJpC,MAAAA,KAAK,CACAuE,GADL,CACS,wCAAwCmB,UADjD,EAC6D,KAAK9D,KAAL,CAAWI,IAAX,CAAgB2D,GAAhB,CAD7D,EAEK1C,IAFL,CAEUC,QAAQ,IAAI;AACdI,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAK3B,KAAL,CAAWI,IAAX,CAAgB2D,GAAhB,CAAZ;AACA,aAAKnE,QAAL,CAAc;AAAEgB,UAAAA,OAAO,EAAE;AAAX,SAAd;AACH,OALL,EAMKY,KANL,CAMW,UAASC,KAAT,EAAgB;AACnBS,QAAAA,KAAK,CAAC,0BAAD,CAAL;AACAR,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,OATL;AAUH,KA1Bc,CA2Bf;;;AAEA,QAAIiC,IAAI,GAAG,CAAC,KAAK1D,KAAL,CAAWO,QAAvB;AACA,SAAKX,QAAL,CAAc;AAAEW,MAAAA,QAAQ,EAAEmD;AAAZ,KAAd,EA9Be,CA+Bf;AACH;;AAGDQ,EAAAA,MAAM,GACN;AACI,UAAMC,QAAQ,GAAG,KAAKnE,KAAL,CAAWC,WAAX,CAAuBmE,IAAxC;AACA,UAAMC,MAAM,GAAG,KAAKrE,KAAL,CAAWC,WAAX,CAAuB6C,GAAtC;AACA,QAAI1D,YAAJ;;AACA,QAAG+E,QAAQ,KAAK,WAAhB,EAA6B;AACzB/E,MAAAA,YAAY,GACZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,EAAf;AAAmB,QAAA,EAAE,EAAE,CAAvB;AAA0B,QAAA,EAAE,EAAE,CAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD;AAAM,QAAA,SAAS,EAAC,KAAhB;AAAsB,sBAAW,iBAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,QAAD;AAAU,QAAA,IAAI,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,EAEI,oBAAC,OAAD;AAAS,QAAA,KAAK,EAAC,SAAf;AAAyB,sBAAW,OAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAEkF,UAAAA,KAAK,EAAE,SAAT;AAAoBC,UAAAA,MAAM,EAAE;AAA5B,SAAb;AAAmD,QAAA,EAAE,EAAC,SAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgE;AAAG,QAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAA9B,CAAhE,CADA,CAFJ,CADJ,CADJ,CADA,CADJ,EAaI,oBAAC,IAAD;AAAM,QAAA,SAAS,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,EAAf;AAAmB,QAAA,EAAE,EAAE,EAAvB;AAA2B,QAAA,EAAE,EAAE,EAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACQ,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADR,EAEQ,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAFR,EAGQ,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAHR,EAIQ,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAJR,EAKQ,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALR,CADJ,CADJ,EAUI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAKvE,KAAL,CAAWI,IAAX,CAAgB+B,MAAhB,CAAuBC,IAAI,IAAIA,IAAI,CAACoC,SAAL,KAAmBH,MAAnB,IAA6BjC,IAAI,CAACqC,MAAL,GAAcrC,IAAI,CAAC5B,MAA/E,EAAuFkE,GAAvF,CAA2F,CAACjB,GAAD,EAAKM,GAAL,KACxF,oBAAC,QAAD;AAAU,QAAA,GAAG,EAAEA,GAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAYN,GAAG,CAACkB,KAAhB,CADJ,EAEI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAYlB,GAAG,CAACmB,UAAJ,CAAehB,SAAf,CAAyB,CAAzB,EAA2B,EAA3B,CAAZ,CAFJ,EAGI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAYH,GAAG,CAACT,MAAhB,CAHJ,EAII,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAYS,GAAG,CAACjD,MAAJ,GAAaiD,GAAG,CAACgB,MAA7B,CAJJ,EAMQ,oBAAC,IAAD;AACI,QAAA,EAAE,EAAE;AACAI,UAAAA,QAAQ,EAAE,UADV;AAEA7E,UAAAA,KAAK,EAAEyD,GAAG,CAACX,GAFX,CAEe;;AAFf,SADR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BANR,EAaI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,QAAD,CAAU,MAAV;AAAiB,QAAA,OAAO,EAAC,WAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI,oBAAC,QAAD,CAAU,IAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,QAAD,CAAU,IAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,OAAD;AAAS,QAAA,KAAK,EAAC,YAAf;AAA4B,sBAAW,QAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AACI,QAAA,SAAS,EAAC,sDADd;AAEI,QAAA,OAAO,EAAE,MAAM,KAAKjC,MAAL,CAAY4C,GAAG,CAACX,GAAhB,CAFnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAGI;AACA,QAAA,KAAK,EAAE;AACHwB,UAAAA,KAAK,EAAE;AADJ,SADP;AAII,QAAA,SAAS,EAAC,gBAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ,YADJ,CADJ,CADJ,EAcI,oBAAC,QAAD,CAAU,IAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,OAAD;AAAS,QAAA,KAAK,EAAC,UAAf;AAA0B,sBAAW,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AACI,QAAA,SAAS,EAAC,sDADd;AAEI,QAAA,OAAO,EAAE,MAAM,KAAKvD,OAAL,CAAa0C,GAAb,CAFnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAGI;AACA,QAAA,KAAK,EAAE;AACHa,UAAAA,KAAK,EAAE;AADJ,SADP;AAII,QAAA,SAAS,EAAC,gBAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ,SADJ,CADJ,CAdJ,CAFJ,CADJ,CAbJ,EA+CI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,CAAC,KAAKtE,KAAL,CAAWO,QAAZ,IAAwB,KAAKP,KAAL,CAAWY,OAAX,KAAuB6C,GAAG,CAACX,GAAnD,GACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,GAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI;AAAM,QAAA,UAAU,MAAhB;AAAiB,QAAA,QAAQ,EAAE,KAAKgC,QAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,OAAO,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDADJ,EAC0E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAD1E,EAEI;AACI,QAAA,QAAQ,EAAE,KAAKnF,QADnB;AAEI,QAAA,KAAK,EAAE,KAAKK,KAAL,CAAWS,MAFtB;AAGI,QAAA,EAAE,EAAC,QAHP;AAII,QAAA,IAAI,EAAC,QAJT;AAKI,QAAA,GAAG,EAAC,GALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CADJ,EAWI;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,OAAO,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDADJ,EACyE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADzE,EAEI;AACI,QAAA,QAAQ,EAAE,KAAKd,QADnB;AAEI,QAAA,KAAK,EAAE,KAAKK,KAAL,CAAWQ,MAFtB;AAGI,QAAA,EAAE,EAAC,QAHP;AAII,QAAA,IAAI,EAAC,QAJT;AAKI,QAAA,GAAG,EAAC,GALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CAXJ,EAqBI;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,OAAO,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCADJ,EAC8D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAD9D,EAEI;AACI,QAAA,QAAQ,EAAE,KAAKb,QADnB;AAEI,QAAA,KAAK,EAAE,KAAKK,KAAL,CAAWU,QAFtB;AAGI,QAAA,EAAE,EAAC,UAHP;AAII,QAAA,IAAI,EAAC,MAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CArBJ,EA8BI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAyB,QAAA,KAAK,EAAE;AAAEqE,UAAAA,WAAW,EAAE;AAAf,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AACA,QAAA,KAAK,EAAE;AACHT,UAAAA,KAAK,EAAE;AADJ,SADP;AAII,QAAA,SAAS,EAAC,6DAJd;AAKI,QAAA,OAAO,EAAE,MAAM,KAAKT,MAAL,EALnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANJ,CADA,EASA;AACA,QAAA,KAAK,EAAE;AACHS,UAAAA,KAAK,EAAE;AADJ,SADP;AAII,QAAA,SAAS,EAAC,6DAJd;AAKI,QAAA,OAAO,EAAE,MAAM,KAAKtD,aAAL,CAAmByC,GAAnB,CALnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANJ,CATA,CA9BJ,CAFJ,CAJJ,CADA,CA/CJ,CADH,CADL,CAVJ,CADJ,CADJ,CADJ,CAbJ,CADA;AAgJH;;AACD,WACI;AAAK,MAAA,KAAK,EAAE;AAAEuB,QAAAA,MAAM,EAAE;AAAV,OAAZ;AAAgC,MAAA,SAAS,EAAC,gBAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK7F,YADL,CADJ,CADJ,CADJ,CADJ,CADJ,CADJ;AAeH;;AAvXgC;;AA0XrCA,YAAY,CAAC8F,SAAb,GAAyB;AACrB/D,EAAAA,IAAI,EAAEpC,SAAS,CAACoG,MAAV,CAAiBC,UADF;AAErBtD,EAAAA,MAAM,EAAE/C,SAAS,CAACoG,MAAV,CAAiBC;AAFJ,CAAzB;;AAKA,MAAMC,eAAe,GAAGrF,KAAK,KAAK;AAC9BmB,EAAAA,IAAI,EAAEnB,KAAK,CAACmB,IADkB;AAE9BW,EAAAA,MAAM,EAAE9B,KAAK,CAAC8B;AAFgB,CAAL,CAA7B;;AAIA,eAAe7C,OAAO,CAClBoG,eADkB,CAAP,CAEbjG,YAFa,CAAf","sourcesContent":["import React, {Component} from 'react';\r\nimport axios from 'axios';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport List from '@material-ui/core/List';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport PropTypes from \"prop-types\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport { connect } from \"react-redux\";\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\n\r\nclass MyActiveJobs extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userdetails: [],\r\n            users: [],\r\n            applications: [],\r\n            jobs: [],\r\n            sortedJobs: [], \r\n            sortName:true, \r\n            showform: false,\r\n            posmax: -1,\r\n            appmax: -1,\r\n            deadline: new Date(),\r\n            editing: \"\"\r\n        };\r\n        this.deljob = this.deljob.bind(this);\r\n        this.editJob = this.editJob.bind(this);\r\n        this.editJobSubmit = this.editJobSubmit.bind(this);\r\n    }\r\n\r\n    onLogoutClick = e => {\r\n        e.preventDefault();\r\n        this.props.logoutUser();\r\n    };\r\n\r\n    onChange = e => {\r\n        this.setState({ [e.target.id]: e.target.value });\r\n    };\r\n\r\n    componentDidMount() {\r\n        const { user } = this.props.auth;\r\n        axios.get('http://localhost:4000/user/'+ user.id)\r\n                .then(response => {\r\n                    this.setState({userdetails: response.data});\r\n                })\r\n                .catch(function(error) {\r\n                    console.log(error);\r\n                })\r\n        axios.get('http://localhost:4000/job/get_jobs')\r\n            .then(response => {\r\n                this.setState({jobs: response.data, sortedJobs:response.data});\r\n            })\r\n            .catch(function(error) {\r\n                console.log(error);\r\n            })\r\n        axios.get('http://localhost:4000/user/')\r\n            .then(response => {\r\n                this.setState({users: response.data});\r\n            })\r\n            .catch(function(error) {\r\n                console.log(error);\r\n            })\r\n        axios.get('http://localhost:4000/application/get_applications')\r\n            .then(response => {\r\n                this.setState({applications: response.data});\r\n            })\r\n            .catch(function(error) {\r\n                console.log(error);\r\n            })\r\n    }\r\n\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.errors) {\r\n            this.setState({\r\n            errors: nextProps.errors\r\n            });\r\n        }\r\n    }\r\n\r\n    deljob(id) {\r\n        let applicationsArray = this.state.applications;\r\n        let usersArray = this.state.users;\r\n        axios\r\n            .delete('http://localhost:4000/job/del_job/' + id)\r\n            .then(response => {\r\n                alert(\"Job deleted successfully.\");\r\n            })\r\n            .catch(function(error) {\r\n                console.log(error);\r\n            })\r\n\r\n        applicationsArray.filter(item => item.jobId === id && item.status === \"Accepted\").forEach(\r\n            function(appli) \r\n            {\r\n                const editEmployee = {\r\n                    working: false\r\n                }\r\n                axios\r\n                    .put('http://localhost:4000/user/edit_profile/' + appli.applicantId, editEmployee)\r\n                    .then(response => {\r\n                        console.log(editEmployee);\r\n                    })\r\n                    .catch(function(error) {\r\n                        console.log(error);\r\n                    })\r\n            })\r\n    \r\n        applicationsArray.filter(item => item.jobId === id).forEach(\r\n            function(appli) \r\n            {\r\n                let applicant = usersArray.filter(item => item._id === appli.applicantId)[0];\r\n                let nnumapp = +applicant.numapp;\r\n\r\n                if(applicant.working === false)\r\n                {\r\n                    nnumapp = +nnumapp - 1;\r\n                    if(nnumapp < 0) nnumapp = 0;\r\n                }\r\n\r\n                const editApplicant = {\r\n                    numapp: nnumapp\r\n                };\r\n\r\n                axios\r\n                    .put('http://localhost:4000/user/edit_profile/' + appli.applicantId, editApplicant)\r\n                    .then(response => {\r\n                        console.log(editApplicant);\r\n                    })\r\n                    .catch(function(error) {\r\n                        console.log(error);\r\n                    })\r\n\r\n                const editAppli = {\r\n                    status: \"Deleted\"\r\n                }\r\n\r\n                axios\r\n                    .put('http://localhost:4000/application/edit_application/' + appli._id, editAppli)\r\n                    .then(response => {\r\n                        console.log(editAppli);\r\n                    })\r\n                    .catch(function(error) {\r\n                        console.log(error);\r\n                    })\r\n            })\r\n\r\n        \r\n        // to refresh\r\n        this.props.history.push('/viewMyActiveJobs');\r\n        this.props.history.push('/viewMyActiveJobs');\r\n        this.props.history.goBack();\r\n        window.location.reload();\r\n        \r\n    }\r\n\r\n    editJob(job) {\r\n        let show = !this.state.showform;\r\n        this.setState({ showform: show});\r\n        this.setState({ editing: job._id });\r\n        console.log(this.state.showform);\r\n        this.setState({ appmax: job.appmax });\r\n        this.setState({ posmax: job.posmax });\r\n        if(job.deadline)\r\n        {\r\n            job.deadline = job.deadline.toString();\r\n            job.deadline = job.deadline.substring(0,10);\r\n            this.setState({ deadline: job.deadline });\r\n        }\r\n        // to refresh\r\n        // this.props.history.push('/viewMyActiveJobs');\r\n    }\r\n\r\n    onBack() {\r\n        let show = !this.state.showform;\r\n        this.setState({ showform: show});\r\n        this.setState({ editing: \"\" });\r\n        \r\n        // to refresh\r\n        this.props.history.push('/viewMyActiveJobs');\r\n    }\r\n\r\n    editJobSubmit(job) {\r\n        const idToChange = job._id;\r\n        const ind = this.state.jobs.findIndex(x => x._id === idToChange)\r\n        \r\n        if(this.state.deadline)\r\n            this.state.jobs[ind].deadline = this.state.deadline;\r\n        if(this.state.appmax < this.state.posmax)\r\n        {\r\n            alert(\"Max. no. of applications cannot be less than the max. no. of positions.\");\r\n        }\r\n        else\r\n        {\r\n            if(this.state.appmax)\r\n                this.state.jobs[ind].appmax = this.state.appmax;\r\n            if(this.state.posmax)\r\n                this.state.jobs[ind].posmax = this.state.posmax;\r\n            axios\r\n                .put('http://localhost:4000/job/edit_job/' + idToChange, this.state.jobs[ind])\r\n                .then(response => {\r\n                    console.log(this.state.jobs[ind]);\r\n                    this.setState({ editing: \"\" });\r\n                })\r\n                .catch(function(error) {\r\n                    alert(\"Job couldn't be updated!\");\r\n                    console.log(error);\r\n                })\r\n        }\r\n        // to refresh\r\n        \r\n        let show = !this.state.showform;\r\n        this.setState({ showform: show});\r\n        // window.location.reload();\r\n    }\r\n\r\n\r\n    render() \r\n    {\r\n        const userRole = this.state.userdetails.role;\r\n        const userid = this.state.userdetails._id;\r\n        let MyActiveJobs;\r\n        if(userRole === \"recruiter\") {\r\n            MyActiveJobs =\r\n            <div>\r\n                <Grid>\r\n                <Grid item xs={12} md={3} lg={3}>\r\n                    <List component=\"nav\" aria-label=\"mailbox folders\">\r\n                        <ListItem text>\r\n                            <h3>My Jobs Listing </h3>\r\n                            <Tooltip title=\"Add Job\" aria-label=\"added\">\r\n                            <Link style={{ color: '#009900', weight: 'bold' }} to=\"/addJob\"><i className=\"material-icons\"><h2> add</h2></i></Link>\r\n                            </Tooltip>\r\n                        </ListItem>\r\n                    </List>\r\n                </Grid>\r\n                </Grid>\r\n                <Grid container>\r\n                    <Grid item xs={12} md={12} lg={12}>\r\n                        <Paper>\r\n                            <Table>\r\n                                <TableHead>\r\n                                    <TableRow>\r\n                                            <TableCell>Title</TableCell>\r\n                                            <TableCell>Date of posting</TableCell>\r\n                                            <TableCell>Number of Applicants</TableCell>\r\n                                            <TableCell>Remaining Number of Positions</TableCell>\r\n                                            <TableCell></TableCell>\r\n                                    </TableRow>\r\n                                </TableHead>\r\n                                <TableBody>\r\n                                    {this.state.jobs.filter(item => item.recruiter === userid && item.numpos < item.posmax).map((job,ind) => (\r\n                                        <TableRow key={ind}>\r\n                                            <TableCell>{job.title}</TableCell>\r\n                                            <TableCell>{job.dateOfPost.substring(0,10)}</TableCell>\r\n                                            <TableCell>{job.numapp}</TableCell>\r\n                                            <TableCell>{job.posmax - job.numpos}</TableCell>\r\n                                            \r\n                                                <Link\r\n                                                    to={{\r\n                                                        pathname: \"/appList\",\r\n                                                        state: job._id // data array of objects\r\n                                                    }}\r\n                                                    >View applications</Link>\r\n                                                \r\n                                            <TableCell>\r\n                                                <Dropdown>\r\n                                                    <Dropdown.Toggle variant=\"secondary\"/>\r\n                                                    <Dropdown.Menu>\r\n                                                        <Dropdown.Item>\r\n                                                            <Tooltip title=\"Delete Job\" aria-label=\"delete\">\r\n                                                                <button\r\n                                                                    className=\"btn waves-effect waves-light hoverable blue accent-3\" \r\n                                                                    onClick={() => this.deljob(job._id)}>\r\n                                                                    <i \r\n                                                                    style={{\r\n                                                                        color: \"#FF0000\",\r\n                                                                        }}\r\n                                                                        className=\"material-icons\">delete</i> Delete\r\n                                                                </button> \r\n                                                            </Tooltip>\r\n                                                        </Dropdown.Item>\r\n                                                        <Dropdown.Item>\r\n                                                            <Tooltip title=\"Edit Job\" aria-label=\"edit\">\r\n                                                                <button\r\n                                                                    className=\"btn waves-effect waves-light hoverable blue accent-3\" \r\n                                                                    onClick={() => this.editJob(job)}>\r\n                                                                    <i \r\n                                                                    style={{\r\n                                                                        color: \"#0000FF\",\r\n                                                                        }}\r\n                                                                        className=\"material-icons\">edit</i>Edit\r\n                                                                </button>\r\n                                                            </Tooltip>\r\n                                                        </Dropdown.Item>\r\n                                                    </Dropdown.Menu>\r\n                                                </Dropdown>\r\n                                                 \r\n                                            </TableCell>\r\n                                            <TableCell>                   \r\n                                            <div>\r\n                                            { !this.state.showform || this.state.editing !== job._id? \r\n                                                <div></div>\r\n                                            : \r\n                                                <div>\r\n                                                    <br></br>\r\n                                                    <form noValidate onSubmit={this.onSubmit}>\r\n                                                        <div className=\"input-field col s12\">\r\n                                                            <label htmlFor=\"appmax\">Maximum number of applications allowed</label><br></br>\r\n                                                            <input\r\n                                                                onChange={this.onChange}\r\n                                                                value={this.state.appmax}\r\n                                                                id=\"appmax\"\r\n                                                                type=\"number\"\r\n                                                                min=\"0\"\r\n                                                            />\r\n                                                        </div>\r\n                                                        <div className=\"input-field col s12\">\r\n                                                            <label htmlFor=\"posmax\">Maximum number of positions available</label><br></br>\r\n                                                            <input\r\n                                                                onChange={this.onChange}\r\n                                                                value={this.state.posmax}\r\n                                                                id=\"posmax\"\r\n                                                                type=\"number\"\r\n                                                                min=\"0\"\r\n                                                            />\r\n                                                        </div>\r\n                                                        <div className=\"input-field col s12\">\r\n                                                            <label htmlFor=\"deadline\">Deadline for application</label><br></br>\r\n                                                            <input\r\n                                                                onChange={this.onChange}\r\n                                                                value={this.state.deadline}\r\n                                                                id=\"deadline\"\r\n                                                                type=\"date\"\r\n                                                            />\r\n                                                        </div>\r\n                                                        <div className=\"col s12\" style={{ paddingLeft: \"11.250px\" }}>\r\n                                                        <button\r\n                                                        style={{\r\n                                                            color: \"#0000FF\",\r\n                                                            }}\r\n                                                            className=\"btn btn-sm waves-effect waves-light hoverable blue accent-3\" \r\n                                                            onClick={() => this.onBack()}>\r\n                                                            <b>Back</b>\r\n                                                        </button>\r\n                                                        <button\r\n                                                        style={{\r\n                                                            color: \"#009900\",\r\n                                                            }}\r\n                                                            className=\"btn btn-sm waves-effect waves-light hoverable blue accent-3\" \r\n                                                            onClick={() => this.editJobSubmit(job)}>\r\n                                                            <b>Save</b>\r\n                                                        </button>\r\n                                                        </div>\r\n                                                    </form>\r\n                                                </div>  \r\n                                            }\r\n                                            </div>\r\n                                            </TableCell>\r\n                                        </TableRow> \r\n                                ))}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </Paper>               \r\n                    </Grid>    \r\n                </Grid>            \r\n            </div>\r\n        }\r\n        return (\r\n            <div style={{ height: \"75vh\" }} className=\"valign-wrapper\">\r\n                <div className=\"row\">\r\n                    <div className=\"col s12 center-align\">\r\n                        <Card style={{ width: '100%' }}>\r\n                            <Card.Body>\r\n                                <Card.Text>\r\n                                    {MyActiveJobs}\r\n                                </Card.Text>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nMyActiveJobs.propTypes = {\r\n    auth: PropTypes.object.isRequired,\r\n    errors: PropTypes.object.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    auth: state.auth,\r\n    errors: state.errors\r\n});\r\nexport default connect(\r\n    mapStateToProps,\r\n)(MyActiveJobs);"]},"metadata":{},"sourceType":"module"}